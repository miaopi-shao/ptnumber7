<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第七組專題</title>
    <style>
        /* 基本的頁面設計(整個) */
        body {
            margin: 0; /* 移除瀏覽器預設的外邊距 */
            padding: 0; /* 移除瀏覽器預設的內邊距 */
            display: flex; /* 使用 Flexbox 進行排版 */
            flex-direction: column; /* 排版方向為垂直 */
            justify-content: center; /* 水平居中 */
            align-items: center; /* 垂直居中 */
            height: 100vh; /* 設置頁面高度為視窗高度 */
            background-color: #48BC1D; /* 設置背景顏色-綠色 */
        }

        /* 頁面頭部樣式 */
        .header {
            background-color: #E7F9E0; /* 頁面頭部背景顏色-白綠色 */
            height: 20vh; /* 設定區塊的高度為當前視窗高度的 30% */
            display: flex; /* 使用 Flexbox 將內容置中 */
            justify-content: center; /* 水平居中內容 */
            align-items: center;  /* 頂部對齊 */
            width: 100%; /* 設置寬度填滿頁面 */ 
            position: absolute;/* 絕對定位 */
            top:0;/*移至頁面最上方*/
        }

        .header h1 {
            color: #0066cc; /* 設定標題文字的顏色 */
            margin: 0; /* 移除標題預設的外邊距 */
        }

        /* 登入區塊的樣式 */
        .login-box {
            background-color: #FAE789; /* 設置背景為 #FAE789色 */
            border: 3px solid black; /* 外邊框，3px 厚度，顏色為黑色 */
            width: 250px; /* 設定區塊寬度為 250px */
            padding: 35px; /* 設定內邊距為 35px */
            position: absolute; /* 絕對定位讓區塊可以固定位置 */
            left: 0px; /* 區塊左邊距離視窗 0px */
            top: 30vh; /* 區塊上方距離視窗高度的 30% */
        }

        .input-field {
            width: 100%; /* 寬度填滿父元素 */
            padding: 5px; /* 文字與邊框的距離為 5px */
            margin: 6px 1; /* 上下外邊距為 6px，左右為 1 */
            font-size: 14px; /* 字體大小為 14px */
            border-radius: 8px; /* 設置圓角邊框，半徑為 8px */
        }
  
        .register-btn {
            width: 100%; /* 按鈕寬度填滿父元素 */
            padding: 10px; /* 按鈕內容與邊界的距離為 10px */
            background-color: #06529F; /* 設定按鈕背景顏色為藍色 */
            color: white; /* 按鈕文字顏色為白色 */
            border: none; /* 移除按鈕邊框 */
            border-radius: 16px; /* 圓角按鈕，半徑為 16px */
            cursor: pointer; /* 滑鼠移到按鈕上會變成手指形狀 */
        }

        .register-btn:hover {
            background-color: #595B7C; /* 當滑鼠懸停時，背景色變為#595B7C的顏色 */
        }

        /* 註冊彈出視窗 */
        .register-popup {
            display: none; /* 預設不顯示彈出視窗 */
            position: fixed; /* 設置彈窗固定在視窗 */
            top: 50%; /* 垂直置中於視窗 */
            left: 50%; /* 水平置中於視窗 */
            transform: translate(-50%, -50%); /* 修正置中的位置 */
            background-color: #A1D9DC; /* 設置彈窗背景為 #A1D9DC色 */
            padding: 30px 50px 30px 20px; /* 設置內邊距，上下10px，右30px 左20px */
            border: 2px solid black; /* 黑色邊框，厚度為 2px */
            width: 350px; /* 設置彈窗寬度為 350px */ 
        }
        
        /* 關閉彈出視窗的按鈕 */
        .close-btn {
            cursor: pointer; /* 滑鼠移到按鈕上變成手指形狀 */
            color: red; /* 設置關閉按鈕顏色為紅色 */
            font-size: 50px; /* 設置關閉按鈕字體大小為 50px */
            position: absolute; /* 設置絕對定位 */
            top: 5px; /* 垂直置中於視窗 */
            left: 10px; /* 水平置中於視窗 */
            padding: 5px; /* 設置上內邊距為5px */
        }

        /* 右側資訊區塊 */
        .info-section {
            background-color: #F8BE71; /* 設置背景顏色為 黃色 */
            position: absolute; /* 設置區塊絕對定位 */
            top: 30vh; /* 區塊上方距離視窗高度的 30% */
            right: 0px; /* 區塊右側距離視窗 0px */
            border: 2px solid black; /* 設置黑色邊框 */
            padding: 20px; /* 內邊距設定為 20px */
            width: 130px; /* 設置區塊寬度為 130px */
            height: 250px; /* 設置區塊高度為 250px */
        }

        /* 底部區域 */
        .footer {
            background-color: #333366; /* 設置底部背景為 深紫藍色 */
            height: 20vh; /* 設定區塊的高度為當前視窗高度的 30% */
            display: flex; /* 使用 Flexbox 將內容置中 */
            justify-content: center; /* 水平居中內容 */
            align-items: center;  /* 垂直居中 */
            font-size: 18px; /* 設置標題的文字大小為18 */
            color: #B9D5F3; /* 設置底部文字顏色為#B9D5F3的白色 */
            text-align: center; /* 文字置中對齊 */
            width: 100%; /* 區塊寬度填滿頁面 */
            position: absolute; /* 設置區塊絕對定位 */
            bottom: 0; /* 區塊緊貼頁面底部 */
        }

        .footer .members {
            margin-top: 10px; /* 設置外邊距為 10px */
        }

        .footer .members h3 {
            font-size: 18px; /* 設置字體大小為 18px */
        }

        .footer .members ul {
            list-style-type: none; /* 移除清單的預設符號 */
            padding: 0; /* 移除內邊距 */
        }

        /* 深藍色底部樣式 */
        .dark-footer {
            background-color: #994D7C; /* 設置底部背景顏色為#994D7C 深粉紅色 */
            font-size: 30px; /* 設置標題的文字大小為30 */
            color: white; /* 設置文字顏色為白色 */
            text-align: center; /* 文字置中對齊 */
            padding: 20px; /* 設置內邊距為 20px */
        }

        /* 右側框起來的樣式 */
        .info-section {
            border: 2px solid #0066cc; /* 設置右側資訊區塊邊框顏色為藍色 */
        }

    </style>
</head>
<body>

    <!-- 頁面頭部 -->
    <div class="header">
        <h1><strong><em>第七組專題</em></strong></h1>
    </div>

    <!-- 登入區域 -->
    <div class="login-box">
        <h3>帳號登錄</h3>
        <form id="loginForm">
            <input type="text" id="username" class="input-field" placeholder="帳號" required><br>
            <input type="password" id="password" class="input-field" placeholder="密碼" required><br>
            <button type="button" class="register-btn" id="showRegisterPopup">新帳戶註冊</button>
        </form>
    </div>

    <!-- 右側資訊區 -->
    <div class="info-section">
        <h3>專題成員：</h3>
        <ol>
            <li>   黃國豪</li>
            <li>   邵妙齊</li>
            <li>   JUR</li>
            <li>   RJ-捷</li>
            <li>   凱莉kelly</li>
        </ol>
        <h3>專題導師：</h3>
        <ul>
            <li>   簡志聰</li>
        </ul>
    </div>

    <!-- 註冊彈出視窗 -->
    <div id="registerPopup" class="register-popup">
        <span class="close-btn" id="closePopup">&times;</span>
        <h3>新帳戶註冊</h3>
        <form id="registerForm">
            <input type="text" id="newUsername" class="input-field" placeholder="帳號" required><br>
            <input type="text" id="newPhrase" class="input-field" placeholder="習慣用語" required><br>
            <label for="keepEveryN">選擇保留代碼間隔：</label>
            <input type="number" id="keepEveryN" class="input-field" value="1" min="1"><br>
            <button type="submit" class="register-btn">註冊</button>
        </form>
    </div>

    <!-- 底部 -->
    <div class="footer">
        <div class="members">
            <h3>專題結束，謝謝觀看</h3>
            <ul>
                <li>各位再見</li>
            
            </ul>
        </div>
    </div>

    <!-- 深藍色底部 -->
    <div class="dark-footer">
        <p>我是中間的內容呈現區域</p>
        <button id="startCrawler" class="register-btn" style="margin-bottom: 10px;">開始爬蟲</button>
        <!-- 顯示爬蟲結果的區塊 -->
        <div id="crawlerResult" style="background: #fff; color: #000; padding: 10px; margin-top: 10px; border-radius: 8px;"></div>
        <ul>
            <li>這是顏色的網址</li>
            <li><img src="D:\PTtest\images/123.png" alt="123"></li>
            <a href=https://www.bing.com/search?pglt=425&q=HTML+Color+Picker&cvid=10ca125bbb294230a174ecd81ebcd1b3&gs_lcrp=EgRlZGdlKgYIABBFGDkyBggAEEUYOTIGCAEQABhAMgYIAhAAGEAyBggDEAAYQDIGCAQQABhAMgYIBRAAGEAyBggGEAAYQDIGCAcQABhAMgYICBAAGEDSAQc2MzZqMGoxqAIIsAIB&FORM=ANNTA1&PC=ACTS target="_blank"> 顏色</a>
            <li>測試網址區域</li>
         
        </ul>
        <video width="240" height="120" controls>
            <source src="D:\PTtest\images/zxaa.mp4" type="video/mp4">
            你的瀏覽器不支持播放此影片。
        </video>
    </div>

    <script>
        // 彈出註冊視窗
        document.getElementById('showRegisterPopup').addEventListener('click', function() {
            document.getElementById('registerPopup').style.display = 'block';
        });

        // 關閉註冊視窗
        document.getElementById('closePopup').addEventListener('click', function() {
            document.getElementById('registerPopup').style.display = 'none';
        });

        // 註冊提交表單
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('newUsername').value;
            const phrase = document.getElementById('newPhrase').value;
            const keepEveryN = document.getElementById('keepEveryN').value;

            fetch('/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    username,
                    phrase,
                    keep_every_n: keepEveryN
                })
            })
            .then(response => response.json())
            .then(data => {
                alert(`註冊成功！帳號：${data.username}, 密碼：${data.encrypted_password}`);
                document.getElementById('registerPopup').style.display = 'none';
            })
            .catch(error => alert('註冊失敗，請稍後再試'));
        });
        
        // 新增：爬蟲功能按鈕事件
        document.getElementById('startCrawler').addEventListener('click', function() {
            // 顯示提示資訊
            document.getElementById('crawlerResult').innerHTML = '正在爬取中，請稍候...';
            
            // 使用 fetch 送出 GET 請求到 /scrape
            fetch('/scrape')
                .then(response => response.json())
                .then(data => {
                    if(data.error) {
                        document.getElementById('crawlerResult').innerHTML = `<span style="color:red;">錯誤：${data.error}</span>`;
                    } else {
                        document.getElementById('crawlerResult').innerHTML = data.scraped_data;
                    }
                })
                .catch(error => {
                    document.getElementById('crawlerResult').innerHTML = `<span style="color:red;">發生錯誤：${error}</span>`;
                });
        });
    </script>

</body>
</html>